<!DOCTYPE HTML>
<html>
<head>

    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>专栏上传</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link href="link/src/umeditor.min.css" type="text/css" rel="stylesheet">
    <link rel="stylesheet" href="link/src/dropify.min.css">
    <link rel="stylesheet" type="text/css" href="link/src/main.css">
</head>
<body class="uploadBack">
    <!-- 测试模块 -->
    <!-- <input id="Imgs" type="text">
    <button onclick="addImg()">测试添加功能</button> -->
    <header>
        <img src="link/img/logo.png">
        <nav>
            <ul>
                <li class="navs"><a href="index.html">首页</a></li>
                <li class="navs"><a href="column.html">专栏</a></li>
                <li class="navs"><a href="download.html">APP下载</a></li>
                <li class="navs"><a href="aboutus.html">关于我们</a></li>
            </ul>
        </nav>
        <!-- 用户登录后显示 -->
        <div id="personalPart">
            <img id="personalHead" src="test/personal_image_head.png">
            <div id="showPerson">
                <img src="link/img/personal_image_head_bg.png">
                <div class="listItem" id="myCol"><a id="myColHref" href="mycolumn.html">我的专栏</a></div>
                <div class="listItem" id="exit">退出</div>
            </div>
            <div id="postColumn" class="btn"><a id="myColUpload" href="upload.html">发布专栏</a></div>
        </div>
    </header>
    <div id="uploadMainPart">
        <div id="newCol">新建专栏</div>
        <div id="leftPart">
            <div id="insertPart">插入图片</div>
            <div id="coverImgPart">
                <img id="coverImg" src="link/img/cover.png">
            </div>
            <div id="imgList">
                <form action="">
                    <div>
                        <img class="chooseImg" src="test/banner1.png">   <input class="inputChoose" name="imgChoose" type="radio">
                    </div>

                    <div>
                        <img class="chooseImg" src="test/banner2.png">   <input class="inputChoose" name="imgChoose" type="radio">
                    </div>

                    <div>
                        <img class="chooseImg" src="test/banner3.png">   <input class="inputChoose" name="imgChoose" type="radio">
                    </div>
                    <div>
                        <img class="chooseImg" src="test/banner1.png">   <input class="inputChoose" name="imgChoose" type="radio">
                    </div>

                    <div>
                        <img class="chooseImg" src="https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=1183223528,3058066243&fm=116&gp=0.jpg">   <input class="inputChoose" name="imgChoose" type="radio">
                    </div>
                    <div>
                        <img class="chooseImg" src="https://ss3.bdstatic.com/70cFv8Sh_Q1YnxGkpoWK1HF6hhy/it/u=1183223528,3058066243&fm=116&gp=0.jpg">   <input class="inputChoose" name="imgChoose" type="radio">
                    </div>
                </form>
                <span class="btn insertBtn" onclick="insert()">插入文章</span>
                <span class="btn insertBtn" onclick="forCover()">作为封面</span>

                <div class="btn deleteBtn" onclick="deleteImg()">删除图片</div>
            </div>
            <div id="upload">
                <form id="fileinfo" enctype="multipart/form-data" method="post" name="fileinfo">
                    <input name="upLoad" type="file" id="uploadImg" class="dropify-fr" />
                </form>
                <div class="btn uploadBtn" onclick="upload()">上传</div>
            </div>
        </div>
        <div id="rightPart">
            <input id="uploadTitle" class="uploadInput" type="text" placeholder = '标题'>
            <input id="uploadKeys" class="uploadInput" type="text" placeholder = '添加相关标签，用一个空格隔开'>
            <textarea id="sum" maxlength ='100' placeholder = '摘要 选填，如果不填会摘取正文的前100字'></textarea>
            <div id="richtext">
                    <script type="text/plain" id="myEditor" style = 'width:100%;height:635px;'>
                        <p>这里我可以写一些输入提示</p>
                    </script>

                    <div class="clear"></div>
            </div>
            <div id="uploadBtn" class="btn">发布</div>
        </div>
    </div>

    <footer>
        Copyright © 2015.正蒙同创 JoinMind All rights reserved.
    </footer>


    <!--style给定宽度可以影响编辑器的最终宽度-->
    <!-- 富文本编辑器模块 -->
<!--     <div id="richtext">
        <script type="text/plain" id="myEditor" style="width:100%;height:800px;">
            <p>这里我可以写一些输入提示</p>
        </script>


        <div class="clear"></div>


        <div id="btns">
            <table>
                <tr>
                    <td>
                        <button class="btn" unselected="on" onclick="getAllHtml()">获得整个html的内容</button>&nbsp;
                        <button class="btn" onclick="getContent()">获得内容</button>&nbsp;
                        <button class="btn" onclick="setContent()">写入内容</button>&nbsp;
                        <button class="btn" onclick="setContent(true)">追加内容</button>&nbsp;
                        <button class="btn" onclick="getContentTxt()">获得纯文本</button>&nbsp;
                        <button class="btn" onclick="getPlainTxt()">获得带格式的纯文本</button>&nbsp;
                        <button class="btn" onclick="hasContent()">判断是否有内容</button>
                    </td>
                </tr>
                <tr>
                    <td>
                        <button class="btn" onclick="setFocus()">编辑器获得焦点</button>&nbsp;
                        <button class="btn" onmousedown="isFocus();return false;">编辑器是否获得焦点</button>&nbsp;
                        <button class="btn" onclick="doBlur()">编辑器取消焦点</button>&nbsp;
                        <button class="btn" onclick="insertHtml()">插入给定的内容</button>&nbsp;
                        <button class="btn" onclick="getContentTxt()">获得纯文本</button>&nbsp;
                    </td>
                </tr>
                <tr>
                    <td>
                        <button class="btn" onclick="UM.getEditor('myEditor').setHide()">隐藏编辑器</button>&nbsp;
                        <button class="btn" onclick="UM.getEditor('myEditor').setShow()">显示编辑器</button>&nbsp;
                        <button class="btn" onclick="UM.getEditor('myEditor').setHeight(300)">设置编辑器的高度为300</button>&nbsp;
                        <button class="btn" onclick="UM.getEditor('myEditor').setWidth(1200)">设置编辑器的宽度为1200</button>
                    </td>
                </tr>

            </table>
        </div>
    </div> -->
    



    <!-- 图片上传模块 -->
<!--     <div id="formLoad">
        <form id="imgList">
            <div>
                <img class="chooseImg" src="banner1.png">   <input class="inputChoose" name="imgChoose" type="radio">
            </div>

            <div>
                <img class="chooseImg" src="banner2.png">   <input class="inputChoose" name="imgChoose" type="radio">
            </div>

            <div>
                <img class="chooseImg" src="banner3.png">   <input class="inputChoose" name="imgChoose" type="radio">
            </div>
        </form>
        <button onclick="insert()">插入选择的照片</button>
        <form id="fileinfo" enctype="multipart/form-data" method="post" name="fileinfo">
            <label for="uploadImg">上传图片</label>
            <input name="upLoad" type="file" id="uploadImg" class="dropify-fr" />
        </form>
        <button onclick="upload()">上传</button>
    </div> -->

    <script type="text/javascript">
        function getColumn(){
            var title = $("#uploadTitle").val();
            var keys = $("#uploadKeys").val();
            var sum = '';
            if($('#sum').val() == ''){
                var text = getContentTxt().slice(0,49);
                sum = text;
            }
            else{
                sum = $('#sum').val();
            }
            var cover = "";
            if($("#coverImg").attr('src') == 'static/img/cover.png'){
                cover = '';
            }
            else{
                cover = $("#coverImg").attr('src');
            }
            var content = getContent();
            var column = {
                title:title,
                keys:keys,
                sum:sum,
                cover:cover,
                content:content
            }
            return column;
        }


        function succ(){
            $("#uploadTitle").val('');
            $("#uploadKeys").val('');
            $('#sum').val();
            UM.getEditor('myEditor').setContent('');
            $("#coverImg").attr('src','static/img/cover.png')
        }
    </script>




     <script src="http://cdn.bootcss.com/jquery/2.1.4/jquery.min.js"></script>
    <!-- // <script type="text/javascript" src="js/jquery.min.js"></script> -->
    <script type="text/javascript" charset="utf-8" src="link/js/umeditor.config.js"></script>
    <script type="text/javascript" charset="utf-8" src="link/js/umeditor.min.js"></script>
    <script src="link/js/dropify.min.js"></script>
    <script type="text/javascript" src = 'link/js/upload.js'></script>
    <script type="text/javascript" src="link/js/main.js"></script>
</body>
</html>